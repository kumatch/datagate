(function(e){e("datagate/plow",[],function(){function t(e,t){var n=Array.prototype.slice.call(e);t=t||function(){};if(!n.length){t();return}(function r(e){if(e)t(e);else{var i=n.shift(),o=Array.prototype.slice.call(arguments);n.length>0?o=o.slice(1).concat(r):o=o.slice(1).concat(t),s(function(){try{i.apply(null,o)}catch(e){t(e)}})}})(null)}function n(e,t){var n=0,r=!1,s=o(e),a,f;s?(a=[],f=e.length):(a={},f=u(e).length),t=t||function(){};if(!f){t(null,a);return}var l=function(e,t,n){e(function(e,r){e?n(e):n(null,{index:t,value:r})})},c=1,h=0;i(c,e,l,h,function(e,r){return e?(t(e),!1):(n+=1,a[r.index]=r.value,n===f&&t(null,a),!0)})}function r(t,n,r){var s=t.length,o=[],u=!1;r=r||function(){},s?i(e,t,n,0,function(e,t){return e?(r(e,o),!1):(o.push(t),o.length===s&&r(null,o),!0)}):r(null,[])}function i(e,t,n,r,a){function p(e,t){a(e,t)||(f=!0)}var f=!1,l=o(t),c,h;l?h=t.length:(c=u(t),h=c.length),s(function(){for(var s=r;s<h&&s<r+e;s++)if(!f)try{var o,u;l?(u=s,o=t[u]):(u=c[s],o=t[u]),n.length>2?n(o,u,p):n(o,p)}catch(d){f=!0,a(d)}!f&&s<h&&i(e,t,n,s,a)})}function s(e){typeof process=="undefined"||!process.nextTick?setTimeout(e,0):process.nextTick(e)}function o(e){return Object.prototype.toString.call(e)==="[object Array]"}function u(e){if(typeof Object.keys!="function")return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}var e=10;return{sequential:t,parallel:n,map:r}})})(typeof define=="function"?define:typeof module!="undefined"?function(e,t,n){module.exports=n.apply(this,[])}:function(e,t,n){this[e]=n.apply(this,[])}),function(e){e("datagate/error",["underscore"],function(e){function n(e){Error.call(this),t(this,arguments.callee),this.name="DatagateVariableError",this.message=o(e.message,e.origin,e.result),this.origin=e.origin,this.result=e.result}function r(e){Error.call(this),t(this,arguments.callee),this.name="DatagateArrayError",this.message=o(e.message,e.origin,e.result),this.origin=e.origin,this.result=e.result,this.errors=e.errors,this.errors_message=a(this.errors)}function i(e){Error.call(this),t(this,arguments.callee),this.name="DatagateObjectError",this.message=o(e.message,e.origin,e.result),this.origin=e.origin,this.result=e.result,this.properties=e.properties,this.properties_message=u(this.properties)}function s(e){Error.call(this),t(this,arguments.callee),this.name="DatagateUnionError",this.message=o(e.message,e.origin,e.result),this.origin=e.origin,this.result=e.result,this.errors=e.errors,this.errors_message=a(this.errors)}function o(t,n,r){return e.isFunction(t)?t(n,r):t}function u(t){var n=e.keys(t),r=n.length,i={};for(var s=0;s<r;s++){var o=n[s],u=t[o];u.name==="DatagateObjectError"?i[o]=u.properties_message:u.name==="DatagateArrayError"?i[o]=u.errors_message:i[o]=u.message}return i}function a(t){return e.map(t,function(e){return e.name==="DatagateObjectError"?e.properties_message:e.name==="DatagateArrayError"||e.name==="DatagateUnionError"?e.errors_message:e.message})}var t=Error.captureStackTrace||function(){};return n.prototype=new Error,r.prototype=new Error,i.prototype=new Error,s.prototype=new Error,{VariableError:n,ArrayError:r,ObjectError:i,UnionError:s}})}(typeof define=="function"?define:typeof module!="undefined"?function(e,t,n){var r=[require("underscore")];module.exports=n.apply(this,r)}:function(e,t,n){this[e]=n.apply(this,[this._])}),function(e){e("datagate/filter",[],function(){var e={},t=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};return e.trim=function(e,n){typeof e=="string"&&e+""&&(e=t.call(e)),n(null,e)},e.toLowerCase=function(e,t){typeof e=="string"&&e+""&&(e=String.prototype.toLowerCase.call(e)),t(null,e)},e.toUpperCase=function(e,t){typeof e=="string"&&e+""&&(e=String.prototype.toUpperCase.call(e)),t(null,e)},e.toStringType=function(e,t){t(null,e+"")},e.toNumberType=function(e,t){e===undefined||e===null||e===""?t(null,NaN):t(null,Number(e))},e.toBooleanType=function(e,t){!e||e==="0"||e===null||e===undefined?t(null,!1):t(null,!0)},e.replace=function(e,t){return function(n,r){typeof n=="string"&&n+""&&(n=String.prototype.replace.call(n,e,t)),r(null,n)}},e.toDefault=function(e){return function(t,n){t===undefined||t===null||t===""?n(null,e):n(null,t)}},e.custom=function(e){if(typeof e!="function")throw Error("Argument must be function in datagate custom filter.");return e},e})}(typeof define=="function"?define:typeof module!="undefined"?function(e,t,n){module.exports=n.apply(this,[])}:function(e,t,n){this[e]=n.apply(this,[])}),function(e){e("datagate/validator",["underscore"],function(e){var t={},n={NumberType:function(t,n){e.isNumber(t)?n(null,t):n(Error())},StringType:function(t,n){e.isString(t)?n(null,t):n(Error())},BooleanType:function(t,n){e.isBoolean(t)?n(null,t):n(Error())},FunctionType:function(t,n){e.isFunction(t)?n(null,t):n(Error())},ArrayType:function(t,n){e.isArray(t)?n(null,t):n(Error())},ObjectType:function(e,t){Object.prototype.toString.call(e)==="[object Object]"?t(null,e):t(Error())},DateType:function(t,n){e.isDate(t)?n(null,t):n(Error())},RegExpType:function(t,n){e.isRegExp(t)?n(null,t):n(Error())},Empty:function(e,t){e===null||e===undefined||e===""?t(null,e):t(Error())},Null:function(e,t){e===null?t(null,e):t(Error())},Undefined:function(e,t){e===undefined?t(null,e):t(Error())},NaN:function(t,n){e.isNaN(t)?n(null,t):n(Error())},Integer:function(t,n){(e.isNumber(t)||e.isString(t))&&(t+"").match(/^-?[0-9]+$/)?n(null,t):n(Error())},Alphabet:function(t,n){e.isString(t)&&(t+"").match(/^[a-zA-Z]+$/)?n(null,t):n(Error())},Alphanumeric:function(t,n){e.isString(t)&&(t+"").match(/^[a-zA-Z0-9]+$/)||e.isNumber(t)&&(t+"").match(/^[0-9]+$/)?n(null,t):n(Error())},Decimal:function(t,n){(e.isNumber(t)||e.isString(t))&&(t+"").match(/^\-?[0-9]+(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/)?n(null,t):n(Error())},Ascii:function(t,n){!e.isNaN(t)&&(e.isNumber(t)||e.isString(t))&&(t+"").match(/^[!-~]+$/)?n(null,t):n(Error())},Url:function(e,t){var n=/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?(localhost|(?:(?:[\-\w\d{1-3}]+\.)+(?:com|org|cat|coop|int|pro|tel|xxx|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[\-\w~!$+|.,="'\(\)_\*:]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[\-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[\-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[\-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[\-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[\-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/i;n.test(e)?t(null,e):t(Error())},Email:function(e,t){var n=/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/;n.test(e)?t(null,e):t(Error())},Date:function(t,n){var r=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,i=Date.parse(t);r.test(t)&&!e.isNaN(i)?n(null,t):n(Error())},Time:function(t,n){if(!e.isString(t)){n(Error());return}var r=/^(\d{2}):(\d{2}):(\d{2})$/,i=t.match(r);if(!i){n(Error());return}var s=i[1],o=i[2],u=i[3];s>=0&&s<24&&o>=0&&o<60&&u>=0&&u<60?n(null,t):n(Error())}};return e.each(n,function(e,n){var r="is"+n,i="not"+n;t[r]=e,t[i]=function(t,n){e(t,function(e,r){e?n(null,t):n(Error())})}}),t.required=t.notUndefined,t.max=t.maximum=function(e){return function(n,r){t.isDecimal(n,function(t,i){t?r(t):parseFloat(n)>e?r(Error()):r(null,n)})}},t.min=t.minimum=function(e){return function(n,r){t.isDecimal(n,function(t,i){t?r(t):parseFloat(n)<e?r(Error()):r(null,n)})}},t.maxLength=function(t){return function(n,r){e.isString(n)&&n.length<=t?r(null,n):e.isNumber(n)&&!e.isNaN(n)&&(n+"").length<=t?r(null,n):r(Error())}},t.minLength=function(t){return function(n,r){e.isString(n)&&n.length>=t?r(null,n):e.isNumber(n)&&!e.isNaN(n)&&(n+"").length>=t?r(null,n):r(Error())}},t.isPattern=function(t){if(!e.isRegExp(t))throw Error("Argument must be regexp type in datagate pattern validator.");return function(e,n){(e+"").match(t)?n(null,e):n(Error())}},t.notPattern=function(t){if(!e.isRegExp(t))throw Error("Argument must be regexp type in datagate pattern validator.");return function(e,n){(e+"").match(t)?n(Error()):n(null,e)}},t.isIn=function(t){return function(n,r){e.indexOf(t,n)<0?r(Error()):r(null,n)}},t.notIn=function(t){return function(n,r){e.indexOf(t,n)<0?r(null,n):r(Error())}},t.custom=function(e){if(typeof e!="function")throw Error("Argument must be function in datagate custom validator.");return e},t})}(typeof define=="function"?define:typeof module!="undefined"?function(e,t,n){var r=[require("underscore")];module.exports=n.apply(this,r)}:function(e,t,n){var r=[this._];this[e]=n.apply(this,r)}),function(e){e("datagate/array",["underscore","datagate/plow","datagate/error"],function(e,t,n){var r=n.ArrayError;return function(i,s){return s===undefined&&(s="Invalid value in array."),function(n,o){var u=[],a=[];if(!e.isArray(n)){o(new r({message:s,origin:n,result:[],errors:u}),[]);return}t.map(n,function(e,t,n){typeof i=="function"?i(e,function(e,r){e&&(u[t]=e),a[t]=r,n(null)}):(a[t]=e,n())},function(t){if(t){o(t);return}u=e.compact(u);if(u.length){var i=new r({message:s,origin:n,result:a,errors:u});o(i,a)}else o(null,a)})}}})}(typeof define=="function"?define:typeof module!="undefined"?function(e,t,n){var r=[require("underscore"),require("./plow"),require("./error")];module.exports=n.apply(this,r)}:function(e,t,n){var r=[this._,this["datagate/plow"],this["datagate/error"]];this[e]=n.apply(this,r)}),function(e){e("datagate/object",["underscore","datagate/plow","datagate/error"],function(e,t,n){var r=n.ObjectError;return function(i,s){s===undefined&&(s="Invalid object value.");var o=i?e.keys(i):[];return function(n,u){var a={},f={},l=!1;e.isObject(n)||(l=!0),t.map(o,function(e,t){var r=i[e],s=n?n[e]:undefined;r(s,function(n,r){a[e]=r,n&&(f[e]=n,l=!0),t()})},function(e){if(e)u(e);else if(l){var t=new r({message:s,origin:n,result:a,properties:f});u(t,a)}else u(null,a)})}}})}(typeof define=="function"?define:typeof module!="undefined"?function(e,t,n){var r=[require("underscore"),require("./plow"),require("./error")];module.exports=n.apply(this,r)}:function(e,t,n){var r=[this._,this["datagate/plow"],this["datagate/error"]];this[e]=n.apply(this,r)}),function(e){e("datagate/union",["datagate/plow","datagate/error"],function(e,t){var n=t.UnionError;return function(r,i){return i===undefined&&(i="Invalid value in union."),function(t,s){if(!r)return s(null,t);var o=[],u;e.map(r,function(e,n){e(t,function(e,t){u=t,e?(o.push(e),n()):s(null,t)})},function(e){if(e)s(e);else{var r=new n({message:i,origin:t,result:u,errors:o});s(r,u)}})}}})}(typeof define=="function"?define:typeof module!="undefined"?function(e,t,n){var r=[require("./plow"),require("./error")];module.exports=n.apply(this,r)}:function(e,t,n){var r=[this["datagate/plow"],this["datagate/error"]];this[e]=n.apply(this,r)}),function(e){var t=["underscore","datagate/plow","datagate/error","datagate/array","datagate/object","datagate/union","datagate/filter","datagate/validator"];e("datagate",t,function(e,t,n,r,i,s,o,u){var a=n.VariableError,f=function(r,i){i===undefined&&(i=function(e,t){return"Invalid value / origin: "+e+", result: "+t});var s=e.map(r,function(t){var n,r;e.isArray(t)?(n=t[0],r=t[1]||i):(n=t,r=i);if(!e.isFunction(n))throw Error("Invalid datagate filter.");return function(e,t,i){n(t,function(n,s){if(!n)i(null,e,s);else{var o=r;i(new a({message:o,origin:e,result:t}))}})}});return function(e,n){var r=s.slice(0);r.unshift(function(t){t(null,e,e)}),t.sequential(r,function(e,t,r){e?n(e,e.result):n(null,r)})}};return f.array=r,f.object=i,f.union=s,f.filter=o,f.validator=u,f})}(typeof define=="function"?define:typeof module!="undefined"?function(e,t,n){var r=[require("underscore"),require("./plow"),require("./error"),require("./array"),require("./object"),require("./union"),require("./filter"),require("./validator")];module.exports=n.apply(this,r)}:function(e,t,n){var r=[this._,this["datagate/plow"],this["datagate/error"],this["datagate/array"],this["datagate/object"],this["datagate/union"],this["datagate/filter"],this["datagate/validator"]];this[e]=n.apply(this,r)});