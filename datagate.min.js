(function(a){a("datagate/plow",[],function(){function b(a,b){var c=Array.prototype.slice.call(a);b=b||function(){};if(!c.length){b();return}(function d(a){if(a)b(a);else{var e=c.shift(),g=Array.prototype.slice.call(arguments);c.length>0?g=g.slice(1).concat(d):g=g.slice(1).concat(b),f(function(){try{e.apply(null,g)}catch(a){b(a)}})}})(null)}function c(a,b){var c=0,d=!1,f=g(a),i,j;f?(i=[],j=a.length):(i={},j=h(a).length),b=b||function(){};if(!j){b(null,i);return}var k=function(a,b,c){a(function(a,d){a?c(a):c(null,{index:b,value:d})})},l=1,m=0;e(l,a,k,m,function(a,d){return a?(b(a),!1):(c+=1,i[d.index]=d.value,c===j&&b(null,i),!0)})}function d(b,c,d){var f=b.length,g=[],h=!1;d=d||function(){},f?e(a,b,c,0,function(a,b){return a?(d(a,g),!1):(g.push(b),g.length===f&&d(null,g),!0)}):d(null,[])}function e(a,b,c,d,i){function n(a,b){i(a,b)||(j=!0)}var j=!1,k=g(b),l,m;k?m=b.length:(l=h(b),m=l.length),f(function(){for(var f=d;f<m&&f<d+a;f++)if(!j)try{var g,h;k?(h=f,g=b[h]):(h=l[f],g=b[h]),c.length>2?c(g,h,n):c(g,n)}catch(o){j=!0,i(o)}!j&&f<m&&e(a,b,c,f,i)})}function f(a){typeof process=="undefined"||!process.nextTick?setTimeout(a,0):process.nextTick(a)}function g(a){return Object.prototype.toString.call(a)==="[object Array]"}function h(a){if(typeof Object.keys!="function")return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}var a=10;return{sequential:b,parallel:c,map:d}})})(typeof define=="function"?define:typeof module!="undefined"?function(a,b,c){module.exports=c.apply(this,[])}:function(a,b,c){this[a]=c.apply(this,[])}),function(a){a("datagate/error",["underscore"],function(a){function c(a){Error.call(this),b(this,arguments.callee),this.name="DatagateVariableError",this.message=g(a.message,a.origin,a.result),this.origin=a.origin,this.result=a.result}function d(a){Error.call(this),b(this,arguments.callee),this.name="DatagateArrayError",this.message=g(a.message,a.origin,a.result),this.origin=a.origin,this.result=a.result,this.errors=a.errors,this.errors_message=i(this.errors)}function e(a){Error.call(this),b(this,arguments.callee),this.name="DatagateObjectError",this.message=g(a.message,a.origin,a.result),this.origin=a.origin,this.result=a.result,this.properties=a.properties,this.properties_message=h(this.properties)}function f(a){Error.call(this),b(this,arguments.callee),this.name="DatagateUnionError",this.message=g(a.message,a.origin,a.result),this.origin=a.origin,this.result=a.result,this.errors=a.errors,this.errors_message=i(this.errors)}function g(b,c,d){return a.isFunction(b)?b(c,d):b}function h(b){var c=a.keys(b),d=c.length,e={};for(var f=0;f<d;f++){var g=c[f],h=b[g];h.name==="DatagateObjectError"?e[g]=h.properties_message:h.name==="DatagateArrayError"?e[g]=h.errors_message:e[g]=h.message}return e}function i(b){return a.map(b,function(a){return a.name==="DatagateObjectError"?a.properties_message:a.name==="DatagateArrayError"||a.name==="DatagateUnionError"?a.errors_message:a.message})}var b=Error.captureStackTrace||function(){};return c.prototype=new Error,d.prototype=new Error,e.prototype=new Error,f.prototype=new Error,{VariableError:c,ArrayError:d,ObjectError:e,UnionError:f}})}(typeof define=="function"?define:typeof module!="undefined"?function(a,b,c){var d=[require("underscore")];module.exports=c.apply(this,d)}:function(a,b,c){this[a]=c.apply(this,[this._])}),function(a){a("datagate/filter",[],function(){var a={},b=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};return a.trim=function(a,c){typeof a=="string"&&a+""&&(a=b.call(a)),c(null,a)},a.toLowerCase=function(a,b){typeof a=="string"&&a+""&&(a=String.prototype.toLowerCase.call(a)),b(null,a)},a.toUpperCase=function(a,b){typeof a=="string"&&a+""&&(a=String.prototype.toUpperCase.call(a)),b(null,a)},a.toStringType=function(a,b){b(null,a+"")},a.toNumberType=function(a,b){a===undefined||a===null||a===""?b(null,NaN):b(null,Number(a))},a.toBooleanType=function(a,b){!a||a==="0"||a===null||a===undefined?b(null,!1):b(null,!0)},a.replace=function(a,b){return function(c,d){typeof c=="string"&&c+""&&(c=String.prototype.replace.call(c,a,b)),d(null,c)}},a.toDefault=function(a){return function(b,c){b===undefined||b===null||b===""?c(null,a):c(null,b)}},a.custom=function(a){if(typeof a!="function")throw Error("Argument must be function in datagate custom filter.");return a},a})}(typeof define=="function"?define:typeof module!="undefined"?function(a,b,c){module.exports=c.apply(this,[])}:function(a,b,c){this[a]=c.apply(this,[])}),function(a){a("datagate/validator",["underscore"],function(a){var b={},c={NumberType:function(b,c){a.isNumber(b)?c(null,b):c(Error())},StringType:function(b,c){a.isString(b)?c(null,b):c(Error())},BooleanType:function(b,c){a.isBoolean(b)?c(null,b):c(Error())},FunctionType:function(b,c){a.isFunction(b)?c(null,b):c(Error())},ArrayType:function(b,c){a.isArray(b)?c(null,b):c(Error())},ObjectType:function(a,b){Object.prototype.toString.call(a)==="[object Object]"?b(null,a):b(Error())},DateType:function(b,c){a.isDate(b)?c(null,b):c(Error())},RegExpType:function(b,c){a.isRegExp(b)?c(null,b):c(Error())},Empty:function(a,b){a===null||a===undefined||a===""?b(null,a):b(Error())},Null:function(a,b){a===null?b(null,a):b(Error())},Undefined:function(a,b){a===undefined?b(null,a):b(Error())},NaN:function(b,c){a.isNaN(b)?c(null,b):c(Error())},Integer:function(b,c){(a.isNumber(b)||a.isString(b))&&(b+"").match(/^-?[0-9]+$/)?c(null,b):c(Error())},Alphabet:function(b,c){a.isString(b)&&(b+"").match(/^[a-zA-Z]+$/)?c(null,b):c(Error())},Alphanumeric:function(b,c){a.isString(b)&&(b+"").match(/^[a-zA-Z0-9]+$/)||a.isNumber(b)&&(b+"").match(/^[0-9]+$/)?c(null,b):c(Error())},Decimal:function(b,c){(a.isNumber(b)||a.isString(b))&&(b+"").match(/^\-?[0-9]+(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/)?c(null,b):c(Error())},Ascii:function(b,c){!a.isNaN(b)&&(a.isNumber(b)||a.isString(b))&&(b+"").match(/^[!-~]+$/)?c(null,b):c(Error())},Url:function(a,b){var c=/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[\-\w\d{1-3}]+\.)+(?:com|org|cat|coop|int|pro|tel|xxx|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2})?)|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[\-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[\-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[\-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[\-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[\-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[\-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/;c.test(a)?b(null,a):b(Error())},Email:function(a,b){var c=/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/;c.test(a)?b(null,a):b(Error())},Date:function(b,c){var d=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,e=Date.parse(b);d.test(b)&&!a.isNaN(e)?c(null,b):c(Error())},Time:function(b,c){if(!a.isString(b)){c(Error());return}var d=/^(\d{2}):(\d{2}):(\d{2})$/,e=b.match(d);if(!e){c(Error());return}var f=e[1],g=e[2],h=e[3];f>=0&&f<24&&g>=0&&g<60&&h>=0&&h<60?c(null,b):c(Error())}};return a.each(c,function(a,c){var d="is"+c,e="not"+c;b[d]=a,b[e]=function(b,c){a(b,function(a,d){a?c(null,b):c(Error())})}}),b.required=b.notUndefined,b.max=b.maximum=function(a){return function(c,d){b.isDecimal(c,function(b,e){b?d(b):parseFloat(c)>a?d(Error()):d(null,c)})}},b.min=b.minimum=function(a){return function(c,d){b.isDecimal(c,function(b,e){b?d(b):parseFloat(c)<a?d(Error()):d(null,c)})}},b.maxLength=function(b){return function(c,d){a.isString(c)&&c.length<=b?d(null,c):a.isNumber(c)&&!a.isNaN(c)&&(c+"").length<=b?d(null,c):d(Error())}},b.minLength=function(b){return function(c,d){a.isString(c)&&c.length>=b?d(null,c):a.isNumber(c)&&!a.isNaN(c)&&(c+"").length>=b?d(null,c):d(Error())}},b.isPattern=function(b){if(!a.isRegExp(b))throw Error("Argument must be regexp type in datagate pattern validator.");return function(a,c){b.test(a)?c(null,a):c(Error())}},b.notPattern=function(b){if(!a.isRegExp(b))throw Error("Argument must be regexp type in datagate pattern validator.");return function(a,c){b.test(a)?c(Error()):c(null,a)}},b.isIn=function(b){return function(c,d){a.indexOf(b,c)<0?d(Error()):d(null,c)}},b.notIn=function(b){return function(c,d){a.indexOf(b,c)<0?d(null,c):d(Error())}},b.custom=function(a){if(typeof a!="function")throw Error("Argument must be function in datagate custom validator.");return a},b})}(typeof define=="function"?define:typeof module!="undefined"?function(a,b,c){var d=[require("underscore")];module.exports=c.apply(this,d)}:function(a,b,c){var d=[this._];this[a]=c.apply(this,d)}),function(a){a("datagate/array",["underscore","datagate/plow","datagate/error"],function(a,b,c){var d=c.ArrayError;return function e(c,e){return e===undefined&&(e="Invalid value in array."),function(f,g){var h=[],i=[];if(!a.isArray(f)){g(new d({message:e,origin:f,result:[],errors:h}),[]);return}b.map(f,function(a,b,d){typeof c=="function"?c(a,function(a,c){a&&(h[b]=a),i[b]=c,d(null)}):(i[b]=a,d())},function(b){if(b){g(b);return}h=a.compact(h);if(h.length){var c=new d({message:e,origin:f,result:i,errors:h});g(c,i)}else g(null,i)})}}})}(typeof define=="function"?define:typeof module!="undefined"?function(a,b,c){var d=[require("underscore"),require("./plow"),require("./error")];module.exports=c.apply(this,d)}:function(a,b,c){var d=[this._,this["datagate/plow"],this["datagate/error"]];this[a]=c.apply(this,d)}),function(a){a("datagate/object",["underscore","datagate/plow","datagate/error"],function(a,b,c){var d=c.ObjectError;return function e(c,e){e===undefined&&(e="Invalid object value.");var f=c?a.keys(c):[];return function(g,h){var i={},j={},k=!1;a.isObject(g)||(k=!0),b.map(f,function(a,b){var d=c[a],e=g?g[a]:undefined;d(e,function(c,d){i[a]=d,c&&(j[a]=c,k=!0),b()})},function(a){if(a)h(a);else if(k){var b=new d({message:e,origin:g,result:i,properties:j});h(b,i)}else h(null,i)})}}})}(typeof define=="function"?define:typeof module!="undefined"?function(a,b,c){var d=[require("underscore"),require("./plow"),require("./error")];module.exports=c.apply(this,d)}:function(a,b,c){var d=[this._,this["datagate/plow"],this["datagate/error"]];this[a]=c.apply(this,d)}),function(a){a("datagate/union",["datagate/plow","datagate/error"],function(a,b){var c=b.UnionError;return function d(b,d){return d===undefined&&(d="Invalid value in union."),function(e,f){if(!b)return f(null,e);var g=[],h;a.map(b,function(a,b){a(e,function(a,c){h=c,a?(g.push(a),b()):f(null,c)})},function(a){if(a)f(a);else{var b=new c({message:d,origin:e,result:h,errors:g});f(b,h)}})}}})}(typeof define=="function"?define:typeof module!="undefined"?function(a,b,c){var d=[require("./plow"),require("./error")];module.exports=c.apply(this,d)}:function(a,b,c){var d=[this["datagate/plow"],this["datagate/error"]];this[a]=c.apply(this,d)}),function(a){var b=["underscore","datagate/plow","datagate/error","datagate/array","datagate/object","datagate/union","datagate/filter","datagate/validator"];a("datagate",b,function(a,b,c,d,e,f,g,h){var i=c.VariableError,j=function(c,d){d===undefined&&(d=function(a,b){return"Invalid value / origin: "+a+", result: "+b});var e=a.map(c,function(b){var c,e;a.isArray(b)?(c=b[0],e=b[1]||d):(c=b,e=d);if(!a.isFunction(c))throw Error("Invalid datagate filter.");return function(a,b,d){c(b,function(c,f){if(!c)d(null,a,f);else{var g=e;d(new i({message:g,origin:a,result:b}))}})}});return function(a,c){var d=e.slice(0);d.unshift(function(b){b(null,a,a)}),b.sequential(d,function(a,b,d){a?c(a,a.result):c(null,d)})}};return j.array=d,j.object=e,j.union=f,j.filter=g,j.validator=h,j})}(typeof define=="function"?define:typeof module!="undefined"?function(a,b,c){var d=[require("underscore"),require("./plow"),require("./error"),require("./array"),require("./object"),require("./union"),require("./filter"),require("./validator")];module.exports=c.apply(this,d)}:function(a,b,c){var d=[this._,this["datagate/plow"],this["datagate/error"],this["datagate/array"],this["datagate/object"],this["datagate/union"],this["datagate/filter"],this["datagate/validator"]];this[a]=c.apply(this,d)});